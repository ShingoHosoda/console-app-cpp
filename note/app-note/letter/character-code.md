# 文字コード

## 初めに

文字コードの基本的な事柄をまとめていただきました。

## 文字コードとは？

文字集合を定義し、その集合の各文字に対応するビットを組み合わせを一意に定めたものが文字コードです。

たとえば英大文字のAは```1000001```、Bは```1000010```の2進数で表記するというルールです。

## 符号化文字集合と文字符号化方式

### 符号化文字集合の定義

符号化文字集合とは符号文字集合を定めかつその集合ないの文字とビットの組み合わせを1対1関連付ける規則の集合

符号化文字集合の例として

- JIS X $0201$
- JIS X $0208$
- ISO/IEC $10646$ (Unicode)

などがあります。

### 文字符号化方式の定義

文字符号化方式とは符号化文字集合で文字に対応付けた非負整数値を実際にコンピューターが利用できるデータ列に変換する符号化方式です。

HTTPやファイル保存、HTMLなどで指定する文字コードは文字符号化方式を使用します。

文字符号化方式の例として

- Shift_JIS
- EUC-JP
- ISO-2022-JP
- UTF-8
- UTF-16

などかあります。

### 符号化文字集合と文字符号化方式の関係

符号化文字集合は**規格**を表し文字符号化方式は**実装**を表します。

| 符号化方式  | JIS X $0201$ | JIS X $0208$ | Unicode |
| :---------: | :----------: | :----------: | :-----: |
|  Shift_JIS  |      ○       |      ○       |    -    |
|   EUC-JP    |      ○       |      ○       |    -    |
| ISO-2022-JP |      ○       |      ○       |    -    |
|    UTF-8    |      -       |      -       |    ○    |
|   UTF-16    |      -       |      -       |    ○    |

## ASCII

### ASCIIとは？

ASCIIとはAmerican Standard Code for Infomation Interchangeの略です。

もっとも基本的な文字コードになります。

### ASCIIの構造

$7$ bitで $128$ 文字収録

0x00 ~ 0x1Fは制御文字（タブや改行など）になります。

| 0-31  |       | 32-63 |       | 64-95 |       | 96-127 |       |
| :---: | :---: | :---: | :---: | :---: | :---: | :----: | :---: |
|   0   |       |  32   |       |  64   |   @   |   96   |   `   |
|   1   |       |  33   |   !   |  65   |   A   |   97   |   a   |
|   2   |       |  34   |   "   |  66   |   B   |   98   |   b   |
|   3   |       |  35   |   #   |  67   |   C   |   99   |   c   |
|   4   |       |  36   |   $   |  68   |   D   |  100   |   d   |
|   5   |       |  37   |   %   |  69   |   E   |  101   |   e   |
|   6   |       |  38   |   &   |  70   |   F   |  102   |   f   |
|   7   |       |  39   |   '   |  71   |   G   |  103   |   g   |
|   8   |       |  40   |   (   |  72   |   H   |  104   |   h   |
|   9   |       |  41   |   )   |  73   |   I   |  105   |   i   |
|  10   |       |  42   |   *   |  74   |   J   |  106   |   j   |
|  11   |       |  43   |   +   |  75   |   K   |  107   |   k   |
|  12   |       |  44   |   ,   |  76   |   L   |  108   |   l   |
|  13   |       |  45   |   -   |  77   |   M   |  109   |   m   |
|  14   |       |  46   |   .   |  78   |   N   |  110   |   n   |
|  15   |       |  47   |   /   |  79   |   O   |  111   |   o   |
|  16   |       |  48   |   0   |  80   |   P   |  112   |   p   |
|  17   |       |  49   |   1   |  81   |   Q   |  113   |   q   |
|  18   |       |  50   |   2   |  82   |   R   |  114   |   r   |
|  19   |       |  51   |   3   |  83   |   S   |  115   |   s   |
|  20   |       |  52   |   4   |  84   |   T   |  116   |   t   |
|  21   |       |  53   |   5   |  85   |   U   |  117   |   u   |
|  22   |       |  54   |   6   |  86   |   V   |  118   |   v   |
|  23   |       |  55   |   7   |  87   |   W   |  119   |   w   |
|  24   |       |  56   |   8   |  88   |   X   |  120   |   x   |
|  25   |       |  57   |   9   |  89   |   Y   |  121   |   y   |
|  26   |       |  58   |   :   |  90   |   Z   |  122   |   z   |
|  27   |       |  59   |   ;   |  91   |   [   |  123   |   {   |
|  28   |       |  60   |   <   |  92   |   \   |  124   |  \|   |
|  29   |       |  61   |   =   |  93   |   ]   |  125   |   }   |
|  30   |       |  62   |   >   |  94   |   ^   |  126   |   ~   |
|  31   |       |  63   |   ?   |  95   |   _   |  127   |       |

## Unicode

### Unicodeとは？

世界中の文字を扱えるようにした文字コード。収録文字は現代の文字だけではなく古代の文字や数学記号、絵文字も含まれています。Unicode以前は各国の標準化団体やコンピュターメーカーによって独自開発されていて互換性がありませんでした。

Unicodeは国際規格のISO/IEC $10646$ と互換があります。

### Unicodeの構造(UCS-4)

$4$ バイト符号。

ISO/IEC $10646$ では各バイトが面（plane）、区（row）、点（cell）に対応しています。

面、区、点は00~FFまで割り当てられているもしくは割り当て可能領域になります。

### 基本多言語面(BMP)

ISO/IEC $10646$ の面 $0$ と同じです。もっともよく使う文字や記号、数字が含まれています。

### 基本多言語面の構造（省略版）

|          収録文字等           |   Unicode範囲   |      備考      |
| :---------------------------: | :-------------: | :------------: |
|          Basic Latin          | U+0000 ~ U+0070 |  ASCIIと互換   |
|        IPA Extensions         | U+0250 ~ U+02AF |  国際音声記号  |
|             Greek             | U+0370 ~ U+03FF |  ギリシャ文字  |
|           Cyrillic            | U+0400 ~ U+04FF |   キリル文字   |
|             Runic             | U+16A0 ~ U+16FF |   ルーン文字   |
|           Hiragana            | U+3040 ~ U+309F |    ひらがな    |
|           Katakana            | U+30A0 ~ U+30FF |    カタカナ    |
|              CJK              | U+4E00 ~ U+9FFF |  CJK統合漢字   |
|              ...              |       ...       |      ...       |
| Halfwidth and Fullwidth Forms | U+FF00 ~ U+FFEF | 半角形と全角形 |

### UTF-16

### UTF-8

Unicode符号を $8$ bit符号単位 $1$ byteから $4$ byteの可変長の文字符号化形式です。ASCII互換の文字符号化形式でもあります。

例として

- 「あ」```U+3042```
- 「A」```U+0041```

| 符合位置（ $16$ 進数）          | UTF-8のバイト列（ $2$ 進数）                                |
| :------------------------------ | :---------------------------------------------------------- |
| ```00000000``` ~ ```0000007F``` | ```0xxxxxxx```                                              |
| ```00000080``` ~ ```000007FF``` | ```110xxxxx``` ```10xxxxxx```                               |
| ```00000800``` ~ ```0000FFFF``` | ```1110xxxx``` ```10xxxxxx``` ```10xxxxxx```                |
| ```00010000``` ~ ```0010FFFF``` | ```11110xxx``` ```10xxxxxx``` ```10xxxxxx``` ```10xxxxxx``` |

### UTF-8の符号化計算方法

「A」の計算方法

1. ```U+00000041```は $1$ 行目の $1$ バイトで表記されます。
2. ```U+00000041```は $2$ 進数に変換すると $01000001$ となります。
3. ビット列に当てはめると $01000001$ となります。
4. 当てはめたビット列を $16$ 進数に変換すると```0x41```となります。
5. よって答えは```0x41```となります。

「あ」の計算方法

1. ```U+00003042```は $3$ 行目の $3$ バイトで表記されます。
2. ```U+00003042```は $2$ 進数に変換すると $0011$ $0000$ $0100$ $0010$ となります。
3. ビット列に当てはめると $11100011$ $10000001$ $10000010$ となります。
4. 当てはめたビット列をそれぞれ $16$ 進数に変換すると```E3``` ```81``` ```82``` となります。
5. よって答えは ```E3``` ```81``` ```82``` となります。
